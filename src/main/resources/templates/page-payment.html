<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{mainLayout}">
<head>
  <meta charset="UTF-8">
  <title>Manage Payment</title>
</head>

<div layout:fragment="page-header" class="container-fluid row align-items-center">
  <div class="col-sm-6 col-12 mb-4 mb-sm-0">
    <a th:href="@{/payments}" class="h2 mb-0 ls-tight">Manage Payment</a>
  </div>

  <div onclick="openForm('add')" class="col-sm-6 col-12 text-sm-end">
    <div class="mx-n1">
        <span class="btn d-inline-flex btn-sm btn-primary mx-1">
            <span class="pe-2 d-flex align-items-center"><i class="bi bi-plus"></i></span>
            <span>Create</span>
        </span>
    </div>
  </div>
</div>

<th:block layout:fragment="content">
  <div id="content-wrapper" class="mt-3">
    <div id="list-payments" ></div>
    <div id="form-modal" class="modal fade" tabindex="-1"></div>
  </div>
</th:block>

<th:block layout:fragment="scripts">
  <script th:inline="javascript">

    $(document).ready(function (){
      loadTable()
    })

    function loadTable(page = 1){
      $.ajax({
        url: "/payments/list",
        type: "GET",
        data: {currentPage: page},
        success: (data) => {
          $("#list-payments").html(data)
        },
        error: (err) => {
          console.log("[GET] Room error:", err)
        }
      })
    }
  </script>
</th:block>